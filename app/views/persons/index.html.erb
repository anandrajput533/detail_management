<div class="banner">
    <p>Details management</p>
</div>
<h2>Persons</h2>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Delete action</th>
      <th>Update action</th>
      <th>Show action</th>

    </tr>
  </thead>
  <%= button_to "Create person", new_person_path, data: { "turbo-method": :post }, method: :get %>
  <tbody>
    <% @persons.each do |user| %>
      <tr>
        <td><%= user.id %></td>
        <td><%= user.name %></td>
        <td><%= user.email %></td>
 <td><%= button_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' } %></td> 
<%
=begin%>
 <td><%= button_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?', turbo_method: :delete } %></td> 
<%
=end%>
        <% unless user.person_detail.present? %>
          <td><%= button_to 'Add details', new_person_person_detail_path(user.id), method: :get %></td>
        <% else %>
          <td><%= button_to 'Update details', edit_person_person_detail_path(user.id, user.person_detail.id), method: :get  %></td>

         <td><%= button_to 'Show details', person_person_detail_path(user, user.person_detail), method: :get  %></td>

        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>